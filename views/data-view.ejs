<!DOCTYPE html>
<html lang="en">
<head>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/4.2.8/d3.min.js" type="text/JavaScript"></script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Data Views</title>
    <link rel='stylesheet' href='/css/main.css'>
</head>
<body>
    <header class="main-header">
        <nav class="main-header__nav">
            <ul class="main-header__item-list">
                <li class="main-header__item"><a href='/'>Shop</a></li>
                <li class="main-header__item"><a href='/admin/add-product'>Add Product</a> </li>
                <li class="main-header__item"><a  class="active" href='/data-view'>Data Views</a> </li>
            </ul>
        </nav>
    </header>

    <main>
        <h1>LMS Data Views</h1>
        <p>2018 Course Offerings by Month</p>

    <svg style ="width:500px;height:500px;">
        </svg>
        <script>
           d3.json('data-view', data => dataViz('tweets.json'))
    
           function dataViz(incomingData) {
            var nestedTweets = d3.nest()
              .key(d => d.user)
              .entries(incomingData);
            
            nestedTweets.forEach(d => {
              d.numTweets = d.values.length;
            });
            
            var maxTweets = d3.max(nestedTweets, d => d.numTweets);
            var yScale = d3.scaleLinear().domain([0,maxTweets]).range([0,500]);
            
            d3.select("svg")
              .selectAll("rect")
              .data(nestedTweets)
              .enter()
              .append("rect")
                .attr("width", 50)
                .attr("height", d => yScale(d.numTweets))
                .attr("x", (d,i) => i * 60)
                .attr("y", d => 500 - yScale(d.numTweets))
                .style("fill", "#FE9922")
                .style("stroke", "#9A8B7A")
                .style("stroke-width", "1px");
          }
        </script>
    </main>
</body>
</html>